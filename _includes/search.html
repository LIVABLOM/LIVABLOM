<div class="max-w-6xl mx-auto my-8 px-4">
  <input type="text" id="searchInput" placeholder="Rechercher un logement..." 
         class="w-full border rounded px-4 py-2 mb-6 text-black text-lg" />

  <div id="searchResults" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
</div>

<script>
  const pages = [
    {% for page in site.pages %}
      {
        title: "{{ page.title | escape }}",
        url: "{{ page.url }}",
        tags: {{ page.tags | jsonify }},
        description: "{{ page.description | escape }}",
        image: "{{ page.image | default: '/assets/galerie/blom22.jpg' }}"
      },
    {% endfor %}
  ];

  const input = document.getElementById("searchInput");
  const resultsDiv = document.getElementById("searchResults");

  input.addEventListener("input", () => {
    const query = input.value.toLowerCase().trim();
    if (!query) {
      resultsDiv.innerHTML = "";
      return;
    }

    const matched = pages
      .filter(p => p.title.toLowerCase().includes(query) ||
                   p.description.toLowerCase().includes(query) ||
                   (p.tags && p.tags.some(t => t.toLowerCase().includes(query))))
      .sort(p => {
        // spa/massage en prioritÃ©
        if ((query.includes("spa") || query.includes("massage")) && p.tags.includes("spa")) return -1;
        return 0;
      });

    resultsDiv.innerHTML = matched.map(p => `
      <a href="${p.url}" class="block rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition transform hover:-translate-y-1">
        <div class="relative w-full h-48">
          <img src="${p.image}" alt="${p.title}" class="w-full h-full object-cover"/>
        </div>
        <div class="p-4 bg-white text-black">
          <h3 class="font-bold text-xl mb-1">${p.title}</h3>
          <p class="text-sm text-gray-700">${p.description}</p>
        </div>
      </a>
    `).join("");
  });
</script>
